{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/gfx-image.js","src/utils/GFXImage.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"gfx-image.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var GFXImage = require('./utils/GFXImage');\r\n\r\nwindow.GFXImage = GFXImage;","function GFXImage(){\r\n  var api = {\r\n    elements: []\r\n  }\r\n  \r\n  api.create = function(src, callback){\r\n    if(!callback) callback = function(){};\r\n    \r\n    try {\r\n      var canvas = fx.canvas();\r\n    } catch (e) {\r\n      alert(e);\r\n      return;\r\n    }\r\n\r\n    var image;\r\n    \r\n    if(src instanceof HTMLElement) {\r\n      image = src;\r\n    } else if (typeof src == 'string') {\r\n      image = document.querySelector(src);\r\n      image.crossOrigin = '';\r\n      image.src = image.src+'?loaded';\r\n    }\r\n    \r\n    //element.image = image;\r\n    var element = api.createElement();\r\n    \r\n    function checkImage(){\r\n      if(image.complete && image.naturalHeight !== 0) {\r\n        var texture = canvas.texture(image);\r\n\r\n        // replace the image with the canvas\r\n        image.parentNode.insertBefore(canvas, image);\r\n        image.parentNode.removeChild(image);\r\n        element.texture = texture;\r\n        element.canvas = canvas;\r\n        api.elements.push(element);\r\n        window.requestAnimationFrame(function(){\r\n          element.onload();\r\n          callback();\r\n        });\r\n      } else {\r\n        window.requestAnimationFrame(checkImage);\r\n      }\r\n    }\r\n    \r\n    checkImage();\r\n    \r\n    return element;\r\n  }\r\n  \r\n  api.createElement = function(){\r\n    var element = {\r\n      denoise: { enabled: false },\r\n      noise: { enabled: false },\r\n      sepia: { enabled: false },\r\n      vibrance: { enabled: false },\r\n      triangleBlur: { enabled: false },\r\n      edgeWork: { enabled: false },\r\n      ink: { enabled: false },\r\n      brightnessContrast: { enabled: false },\r\n      curves: { enabled: false },\r\n      hueSaturation: { enabled: false },\r\n      unsharpMask: { enabled: false },\r\n      vignette: { enabled: false },\r\n      lensBlur: { enabled: false },\r\n      tiltShift: { enabled: false },\r\n      zoomBlur: { enabled: false },\r\n      colorHalftone: { enabled: false },\r\n      dotScreen: { enabled: false },\r\n      hexagonalPixelate: { enabled: false },\r\n      bulgePinch: { enabled: false },\r\n      matrixWarp: { enabled: false },\r\n      perspective: { enabled: false },\r\n      swirl: { enabled: false }\r\n    };\r\n    element.onload = function(){};\r\n    //api.elements.push(element);\r\n    \r\n    return element;\r\n  }\r\n  \r\n  api.update = function(){\r\n    try {\r\n      for(var e in elements){\r\n        var element = elements[e];\r\n        var canvas = element.canvas;\r\n        var texture = element.texture;\r\n\r\n        var drawInstance = canvas.draw(texture);\r\n\r\n        if(element['denoise'].enabled)                  drawInstance.denoise            (element['denoise'].exponent)\r\n        if(element['noise'].enabled)                    drawInstance.noise              (element['noise'].amount)\r\n        if(element['sepia'].enabled)                    drawInstance.sepia              (element['sepia'].amount)\r\n        if(element['vibrance'].enabled)                 drawInstance.vibrance           (element['vibrance'].amount)\r\n        if(element['triangleBlur'].enabled)             drawInstance.triangleBlur       (element['triangleBlur'].radius)\r\n        if(element['edgeWork'].enabled)                 drawInstance.edgeWork           (element['edgeWork'].radius)\r\n        if(element['ink'].enabled)                      drawInstance.ink                (element['ink'].strength)\r\n        if(element['brightnessContrast'].enabled)       drawInstance.brightnessContrast (element['brightnessContrast'].brightness, element['brightnessContrast'].contrast)\r\n        if(element['curves'].enabled)                   drawInstance.curves             (element['curves'].red, element['curves'].green, element['curves'].blue)\r\n        if(element['hueSaturation'].enabled)            drawInstance.hueSaturation      (element['hueSaturation'].hue, element['hueSaturation'].saturation)\r\n        if(element['unsharpMask'].enabled)              drawInstance.unsharpMask        (element['unsharpMask'].radius, element['unsharpMask'].strength)\r\n        if(element['vignette'].enabled)                 drawInstance.vignette           (element['vignette'].size, element['vignette'].amount)\r\n        if(element['lensBlur'].enabled)                 drawInstance.lensBlur           (element['lensBlur'].radius, element['lensBlur'].brightness, element['lensBlur'].angle)\r\n        if(element['tiltShift'].enabled)                drawInstance.tiltShift          (element['tiltShift'].startX, element['tiltShift'].startY, element['tiltShift'].endX, element['tiltShift'].endY, element['tiltShift'].blurRadius, element['tiltShift'].gradientRadius)\r\n        if(element['zoomBlur'].enabled)                 drawInstance.zoomBlur           (element['zoomBlur'].centerX, element['zoomBlur'].centerY, element['zoomBlur'].strength)\r\n        if(element['colorHalftone'].enabled)            drawInstance.colorHalftone      (element['colorHalftone'].centerX, element['colorHalftone'].centerY, element['colorHalftone'].angle, element['colorHalftone'].size)\r\n        if(element['dotScreen'].enabled)                drawInstance.dotScreen          (element['dotScreen'].centerX, element['dotScreen'].centerY, element['dotScreen'].angle, element['dotScreen'].size)\r\n        if(element['hexagonalPixelate'].enabled)        drawInstance.hexagonalPixelate  (element['hexagonalPixelate'].centerX, element['hexagonalPixelate'].centerY, element[element.filter].scale)\r\n        if(element['bulgePinch'].enabled)               drawInstance.bulgePinch         (element['bulgePinch'].centerX, element['bulgePinch'].centerY, element['bulgePinch'].radius, element['bulgePinch'].strength)\r\n        if(element['matrixWarp'].enabled)               drawInstance.matrixWarp         (element['matrixWarp'].matrix, element['matrixWarp'].inverse, element['matrixWarp'].useTextureSpace)\r\n        if(element['perspective'].enabled)              drawInstance.perspective        (element['perspective'].before, element['perspective'].after)\r\n        if(element['swirl'].enabled)                    drawInstance.swirl              (element['swirl'].centerX, element['swirl'].centerY, element['swirl'].radius, element['swirl'].angle)\r\n\r\n        drawInstance.update();\r\n        \r\n      }\r\n    } catch(e) {\r\n      console.log(e);\r\n    }\r\n    window.canvas = canvas;\r\n    window.requestAnimationFrame(api.update);\r\n  }\r\n  \r\n  window.requestAnimationFrame(api.update);\r\n  \r\n  window.elements = api.elements;\r\n  \r\n  return api;\r\n  \r\n}\r\n\r\nmodule.exports = GFXImage();"],"preExistingComment":"//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3Nlci1wYWNrXFxfcHJlbHVkZS5qcyIsIi4vc3JjL2dmeC1pbWFnZS5qcyIsIlM6L2dmeC1pbWFnZS9zcmMvdXRpbHMvR0ZYSW1hZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgR0ZYSW1hZ2UgPSByZXF1aXJlKCcuL3V0aWxzL0dGWEltYWdlJyk7XHJcblxyXG53aW5kb3cuR0ZYSW1hZ2UgPSBHRlhJbWFnZTsiLCJmdW5jdGlvbiBHRlhJbWFnZSgpe1xyXG4gIHZhciBhcGkgPSB7XHJcbiAgICBlbGVtZW50czogW11cclxuICB9XHJcbiAgXHJcbiAgYXBpLmNyZWF0ZSA9IGZ1bmN0aW9uKHNyYywgY2FsbGJhY2spe1xyXG4gICAgaWYoIWNhbGxiYWNrKSBjYWxsYmFjayA9IGZ1bmN0aW9uKCl7fTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgdmFyIGNhbnZhcyA9IGZ4LmNhbnZhcygpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBhbGVydChlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbWFnZTtcclxuICAgIFxyXG4gICAgaWYoc3JjIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgaW1hZ2UgPSBzcmM7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcmMgPT0gJ3N0cmluZycpIHtcclxuICAgICAgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNyYyk7XHJcbiAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gJyc7XHJcbiAgICAgIGltYWdlLnNyYyA9IGltYWdlLnNyYysnP2xvYWRlZCc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vZWxlbWVudC5pbWFnZSA9IGltYWdlO1xyXG4gICAgdmFyIGVsZW1lbnQgPSBhcGkuY3JlYXRlRWxlbWVudCgpO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBjaGVja0ltYWdlKCl7XHJcbiAgICAgIGlmKGltYWdlLmNvbXBsZXRlICYmIGltYWdlLm5hdHVyYWxIZWlnaHQgIT09IDApIHtcclxuICAgICAgICB2YXIgdGV4dHVyZSA9IGNhbnZhcy50ZXh0dXJlKGltYWdlKTtcclxuXHJcbiAgICAgICAgLy8gcmVwbGFjZSB0aGUgaW1hZ2Ugd2l0aCB0aGUgY2FudmFzXHJcbiAgICAgICAgaW1hZ2UucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2FudmFzLCBpbWFnZSk7XHJcbiAgICAgICAgaW1hZ2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWFnZSk7XHJcbiAgICAgICAgZWxlbWVudC50ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICBlbGVtZW50LmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICBhcGkuZWxlbWVudHMucHVzaChlbGVtZW50KTtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBlbGVtZW50Lm9ubG9hZCgpO1xyXG4gICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNoZWNrSW1hZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNoZWNrSW1hZ2UoKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfVxyXG4gIFxyXG4gIGFwaS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBlbGVtZW50ID0ge1xyXG4gICAgICBkZW5vaXNlOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIG5vaXNlOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHNlcGlhOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHZpYnJhbmNlOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHRyaWFuZ2xlQmx1cjogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICBlZGdlV29yazogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICBpbms6IHsgZW5hYmxlZDogZmFsc2UgfSxcclxuICAgICAgYnJpZ2h0bmVzc0NvbnRyYXN0OiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIGN1cnZlczogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICBodWVTYXR1cmF0aW9uOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHVuc2hhcnBNYXNrOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHZpZ25ldHRlOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIGxlbnNCbHVyOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHRpbHRTaGlmdDogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICB6b29tQmx1cjogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICBjb2xvckhhbGZ0b25lOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIGRvdFNjcmVlbjogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICBoZXhhZ29uYWxQaXhlbGF0ZTogeyBlbmFibGVkOiBmYWxzZSB9LFxyXG4gICAgICBidWxnZVBpbmNoOiB7IGVuYWJsZWQ6IGZhbHNlIH0sXHJcbiAgICAgIG1hdHJpeFdhcnA6IHsgZW5hYmxlZDogZmFsc2UgfSxcclxuICAgICAgcGVyc3BlY3RpdmU6IHsgZW5hYmxlZDogZmFsc2UgfSxcclxuICAgICAgc3dpcmw6IHsgZW5hYmxlZDogZmFsc2UgfVxyXG4gICAgfTtcclxuICAgIGVsZW1lbnQub25sb2FkID0gZnVuY3Rpb24oKXt9O1xyXG4gICAgLy9hcGkuZWxlbWVudHMucHVzaChlbGVtZW50KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgfVxyXG4gIFxyXG4gIGFwaS51cGRhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgdHJ5IHtcclxuICAgICAgZm9yKHZhciBlIGluIGVsZW1lbnRzKXtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2VdO1xyXG4gICAgICAgIHZhciBjYW52YXMgPSBlbGVtZW50LmNhbnZhcztcclxuICAgICAgICB2YXIgdGV4dHVyZSA9IGVsZW1lbnQudGV4dHVyZTtcclxuXHJcbiAgICAgICAgdmFyIGRyYXdJbnN0YW5jZSA9IGNhbnZhcy5kcmF3KHRleHR1cmUpO1xyXG5cclxuICAgICAgICBpZihlbGVtZW50WydkZW5vaXNlJ10uZW5hYmxlZCkgICAgICAgICAgICAgICAgICBkcmF3SW5zdGFuY2UuZGVub2lzZSAgICAgICAgICAgIChlbGVtZW50WydkZW5vaXNlJ10uZXhwb25lbnQpXHJcbiAgICAgICAgaWYoZWxlbWVudFsnbm9pc2UnXS5lbmFibGVkKSAgICAgICAgICAgICAgICAgICAgZHJhd0luc3RhbmNlLm5vaXNlICAgICAgICAgICAgICAoZWxlbWVudFsnbm9pc2UnXS5hbW91bnQpXHJcbiAgICAgICAgaWYoZWxlbWVudFsnc2VwaWEnXS5lbmFibGVkKSAgICAgICAgICAgICAgICAgICAgZHJhd0luc3RhbmNlLnNlcGlhICAgICAgICAgICAgICAoZWxlbWVudFsnc2VwaWEnXS5hbW91bnQpXHJcbiAgICAgICAgaWYoZWxlbWVudFsndmlicmFuY2UnXS5lbmFibGVkKSAgICAgICAgICAgICAgICAgZHJhd0luc3RhbmNlLnZpYnJhbmNlICAgICAgICAgICAoZWxlbWVudFsndmlicmFuY2UnXS5hbW91bnQpXHJcbiAgICAgICAgaWYoZWxlbWVudFsndHJpYW5nbGVCbHVyJ10uZW5hYmxlZCkgICAgICAgICAgICAgZHJhd0luc3RhbmNlLnRyaWFuZ2xlQmx1ciAgICAgICAoZWxlbWVudFsndHJpYW5nbGVCbHVyJ10ucmFkaXVzKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ2VkZ2VXb3JrJ10uZW5hYmxlZCkgICAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5lZGdlV29yayAgICAgICAgICAgKGVsZW1lbnRbJ2VkZ2VXb3JrJ10ucmFkaXVzKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ2luayddLmVuYWJsZWQpICAgICAgICAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5pbmsgICAgICAgICAgICAgICAgKGVsZW1lbnRbJ2luayddLnN0cmVuZ3RoKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ2JyaWdodG5lc3NDb250cmFzdCddLmVuYWJsZWQpICAgICAgIGRyYXdJbnN0YW5jZS5icmlnaHRuZXNzQ29udHJhc3QgKGVsZW1lbnRbJ2JyaWdodG5lc3NDb250cmFzdCddLmJyaWdodG5lc3MsIGVsZW1lbnRbJ2JyaWdodG5lc3NDb250cmFzdCddLmNvbnRyYXN0KVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ2N1cnZlcyddLmVuYWJsZWQpICAgICAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5jdXJ2ZXMgICAgICAgICAgICAgKGVsZW1lbnRbJ2N1cnZlcyddLnJlZCwgZWxlbWVudFsnY3VydmVzJ10uZ3JlZW4sIGVsZW1lbnRbJ2N1cnZlcyddLmJsdWUpXHJcbiAgICAgICAgaWYoZWxlbWVudFsnaHVlU2F0dXJhdGlvbiddLmVuYWJsZWQpICAgICAgICAgICAgZHJhd0luc3RhbmNlLmh1ZVNhdHVyYXRpb24gICAgICAoZWxlbWVudFsnaHVlU2F0dXJhdGlvbiddLmh1ZSwgZWxlbWVudFsnaHVlU2F0dXJhdGlvbiddLnNhdHVyYXRpb24pXHJcbiAgICAgICAgaWYoZWxlbWVudFsndW5zaGFycE1hc2snXS5lbmFibGVkKSAgICAgICAgICAgICAgZHJhd0luc3RhbmNlLnVuc2hhcnBNYXNrICAgICAgICAoZWxlbWVudFsndW5zaGFycE1hc2snXS5yYWRpdXMsIGVsZW1lbnRbJ3Vuc2hhcnBNYXNrJ10uc3RyZW5ndGgpXHJcbiAgICAgICAgaWYoZWxlbWVudFsndmlnbmV0dGUnXS5lbmFibGVkKSAgICAgICAgICAgICAgICAgZHJhd0luc3RhbmNlLnZpZ25ldHRlICAgICAgICAgICAoZWxlbWVudFsndmlnbmV0dGUnXS5zaXplLCBlbGVtZW50Wyd2aWduZXR0ZSddLmFtb3VudClcclxuICAgICAgICBpZihlbGVtZW50WydsZW5zQmx1ciddLmVuYWJsZWQpICAgICAgICAgICAgICAgICBkcmF3SW5zdGFuY2UubGVuc0JsdXIgICAgICAgICAgIChlbGVtZW50WydsZW5zQmx1ciddLnJhZGl1cywgZWxlbWVudFsnbGVuc0JsdXInXS5icmlnaHRuZXNzLCBlbGVtZW50WydsZW5zQmx1ciddLmFuZ2xlKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ3RpbHRTaGlmdCddLmVuYWJsZWQpICAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS50aWx0U2hpZnQgICAgICAgICAgKGVsZW1lbnRbJ3RpbHRTaGlmdCddLnN0YXJ0WCwgZWxlbWVudFsndGlsdFNoaWZ0J10uc3RhcnRZLCBlbGVtZW50Wyd0aWx0U2hpZnQnXS5lbmRYLCBlbGVtZW50Wyd0aWx0U2hpZnQnXS5lbmRZLCBlbGVtZW50Wyd0aWx0U2hpZnQnXS5ibHVyUmFkaXVzLCBlbGVtZW50Wyd0aWx0U2hpZnQnXS5ncmFkaWVudFJhZGl1cylcclxuICAgICAgICBpZihlbGVtZW50Wyd6b29tQmx1ciddLmVuYWJsZWQpICAgICAgICAgICAgICAgICBkcmF3SW5zdGFuY2Uuem9vbUJsdXIgICAgICAgICAgIChlbGVtZW50Wyd6b29tQmx1ciddLmNlbnRlclgsIGVsZW1lbnRbJ3pvb21CbHVyJ10uY2VudGVyWSwgZWxlbWVudFsnem9vbUJsdXInXS5zdHJlbmd0aClcclxuICAgICAgICBpZihlbGVtZW50Wydjb2xvckhhbGZ0b25lJ10uZW5hYmxlZCkgICAgICAgICAgICBkcmF3SW5zdGFuY2UuY29sb3JIYWxmdG9uZSAgICAgIChlbGVtZW50Wydjb2xvckhhbGZ0b25lJ10uY2VudGVyWCwgZWxlbWVudFsnY29sb3JIYWxmdG9uZSddLmNlbnRlclksIGVsZW1lbnRbJ2NvbG9ySGFsZnRvbmUnXS5hbmdsZSwgZWxlbWVudFsnY29sb3JIYWxmdG9uZSddLnNpemUpXHJcbiAgICAgICAgaWYoZWxlbWVudFsnZG90U2NyZWVuJ10uZW5hYmxlZCkgICAgICAgICAgICAgICAgZHJhd0luc3RhbmNlLmRvdFNjcmVlbiAgICAgICAgICAoZWxlbWVudFsnZG90U2NyZWVuJ10uY2VudGVyWCwgZWxlbWVudFsnZG90U2NyZWVuJ10uY2VudGVyWSwgZWxlbWVudFsnZG90U2NyZWVuJ10uYW5nbGUsIGVsZW1lbnRbJ2RvdFNjcmVlbiddLnNpemUpXHJcbiAgICAgICAgaWYoZWxlbWVudFsnaGV4YWdvbmFsUGl4ZWxhdGUnXS5lbmFibGVkKSAgICAgICAgZHJhd0luc3RhbmNlLmhleGFnb25hbFBpeGVsYXRlICAoZWxlbWVudFsnaGV4YWdvbmFsUGl4ZWxhdGUnXS5jZW50ZXJYLCBlbGVtZW50WydoZXhhZ29uYWxQaXhlbGF0ZSddLmNlbnRlclksIGVsZW1lbnRbZWxlbWVudC5maWx0ZXJdLnNjYWxlKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ2J1bGdlUGluY2gnXS5lbmFibGVkKSAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5idWxnZVBpbmNoICAgICAgICAgKGVsZW1lbnRbJ2J1bGdlUGluY2gnXS5jZW50ZXJYLCBlbGVtZW50WydidWxnZVBpbmNoJ10uY2VudGVyWSwgZWxlbWVudFsnYnVsZ2VQaW5jaCddLnJhZGl1cywgZWxlbWVudFsnYnVsZ2VQaW5jaCddLnN0cmVuZ3RoKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ21hdHJpeFdhcnAnXS5lbmFibGVkKSAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5tYXRyaXhXYXJwICAgICAgICAgKGVsZW1lbnRbJ21hdHJpeFdhcnAnXS5tYXRyaXgsIGVsZW1lbnRbJ21hdHJpeFdhcnAnXS5pbnZlcnNlLCBlbGVtZW50WydtYXRyaXhXYXJwJ10udXNlVGV4dHVyZVNwYWNlKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ3BlcnNwZWN0aXZlJ10uZW5hYmxlZCkgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5wZXJzcGVjdGl2ZSAgICAgICAgKGVsZW1lbnRbJ3BlcnNwZWN0aXZlJ10uYmVmb3JlLCBlbGVtZW50WydwZXJzcGVjdGl2ZSddLmFmdGVyKVxyXG4gICAgICAgIGlmKGVsZW1lbnRbJ3N3aXJsJ10uZW5hYmxlZCkgICAgICAgICAgICAgICAgICAgIGRyYXdJbnN0YW5jZS5zd2lybCAgICAgICAgICAgICAgKGVsZW1lbnRbJ3N3aXJsJ10uY2VudGVyWCwgZWxlbWVudFsnc3dpcmwnXS5jZW50ZXJZLCBlbGVtZW50Wydzd2lybCddLnJhZGl1cywgZWxlbWVudFsnc3dpcmwnXS5hbmdsZSlcclxuXHJcbiAgICAgICAgZHJhd0luc3RhbmNlLnVwZGF0ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cuY2FudmFzID0gY2FudmFzO1xyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhcGkudXBkYXRlKTtcclxuICB9XHJcbiAgXHJcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhcGkudXBkYXRlKTtcclxuICBcclxuICB3aW5kb3cuZWxlbWVudHMgPSBhcGkuZWxlbWVudHM7XHJcbiAgXHJcbiAgcmV0dXJuIGFwaTtcclxuICBcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHRlhJbWFnZSgpOyJdfQ=="}